<!DOCTYPE html>
<html>
<head>
    <title>암호화폐 거래 계산기</title>
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6.26.0/babel.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <meta charset="utf-8">
</head>
<body class="bg-gray-100">
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect } = React;

        function Calculator() {
            const [values, setValues] = useState({
                amount: 100000,
                leverage: 50,
                takerFee: 0.00055,
                makerFee: 0.0002,
                fundingRate: 0.0001,
                fundingHours: 8,
                remainingHours: 2,
                remainingMinutes: 30,
                fundingTime: "",
                usdtRate: 1350,
                entryPrice: 95712,
                currentPrice: 95712
            });

            useEffect(() => {
                const now = new Date();
                const futureTime = new Date(
                    now.getTime() + 
                    (values.remainingHours * 60 + values.remainingMinutes) * 60000
                );
                const timeString = futureTime.toLocaleTimeString('ko-KR', { 
                    hour: '2-digit', 
                    minute: '2-digit' 
                });
                setValues(prev => ({ ...prev, fundingTime: timeString }));
            }, [values.remainingHours, values.remainingMinutes]);

            const calculateResults = () => {
                const tradingAmount = values.amount * values.leverage;
                const contractSize = tradingAmount / values.entryPrice;
                
                const entryFeeTaker = tradingAmount * values.takerFee;
                const exitFeeTaker = tradingAmount * values.takerFee;
                
                const entryFeeMaker = tradingAmount * values.makerFee;
                const exitFeeMaker = tradingAmount * values.makerFee;

                const dailyFundingTimes = 24 / values.fundingHours;
                const fundingFee = tradingAmount * values.fundingRate * dailyFundingTimes;
                
                const priceDiff = values.currentPrice - values.entryPrice;
                const longPnL = contractSize * priceDiff;
                const shortPnL = contractSize * -priceDiff;

                return {
                    tradingAmount,
                    contractSize,
                    entryFeeTaker,
                    exitFeeTaker,
                    entryFeeMaker,
                    exitFeeMaker,
                    fundingFee,
                    longPnL,
                    shortPnL
                };
            };

            const results = calculateResults();

            return (
                <div className="max-w-4xl mx-auto p-4">
                    <h1 className="text-2xl font-bold mb-4">암호화폐 거래 계산기</h1>
                    
                    <div className="bg-white rounded-lg shadow p-6 mb-6">
                        <h2 className="text-xl font-semibold mb-4">입력 정보</h2>
                        <div className="grid grid-cols-4 gap-4">
                            <div>
                                <label className="block text-sm font-medium text-gray-700">투자금액 (USDT)</label>
                                <input
                                    type="number"
                                    value={values.amount}
                                    onChange={(e) => setValues({...values, amount: parseFloat(e.target.value)})}
                                    className="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"
                                />
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700">레버리지</label>
                                <input
                                    type="number"
                                    value={values.leverage}
                                    onChange={(e) => setValues({...values, leverage: parseFloat(e.target.value)})}
                                    className="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"
                                />
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700">테이커 수수료 (%)</label>
                                <input
                                    type="number"
                                    step="0.0001"
                                    value={values.takerFee * 100}
                                    onChange={(e) => setValues({...values, takerFee: parseFloat(e.target.value) / 100})}
                                    className="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"
                                />
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700">메이커 수수료 (%)</label>
                                <input
                                    type="number"
                                    step="0.0001"
                                    value={values.makerFee * 100}
                                    onChange={(e) => setValues({...values, makerFee: parseFloat(e.target.value) / 100})}
                                    className="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"
                                />
                            </div>
                        </div>
                    </div>

                    <div className="bg-white rounded-lg shadow p-6 mb-6">
                        <h2 className="text-xl font-semibold mb-4">계산 결과</h2>
                        <div className="grid grid-cols-2 gap-4">
                            <div>
                                <h3 className="font-medium">거래 정보</h3>
                                <p>총 거래금액: {results.tradingAmount.toLocaleString()} USDT</p>
                                <p>계약 수량: {results.contractSize.toFixed(4)}</p>
                            </div>
                            <div>
                                <h3 className="font-medium">테이커 수수료</h3>
                                <p>진입: {results.entryFeeTaker.toFixed(2)} USDT</p>
                                <p>청산: {results.exitFeeTaker.toFixed(2)} USDT</p>
                            </div>
                            <div>
                                <h3 className="font-medium">메이커 수수료</h3>
                                <p>진입: {results.entryFeeMaker.toFixed(2)} USDT</p>
                                <p>청산: {results.exitFeeMaker.toFixed(2)} USDT</p>
                            </div>
                            <div>
                                <h3 className="font-medium">예상 수익/손실</h3>
                                <p>롱포지션: {results.longPnL.toFixed(2)} USDT</p>
                                <p>숏포지션: {results.shortPnL.toFixed(2)} USDT</p>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<Calculator />, document.getElementById('root'));
    </script>
</body>
</html>
